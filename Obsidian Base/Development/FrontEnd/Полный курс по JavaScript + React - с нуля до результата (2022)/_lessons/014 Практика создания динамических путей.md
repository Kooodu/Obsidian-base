
### Страница ошибки



```JS
import React from 'react';
import ErrorMessage from '../ErrorMessage/ErrorMessage';
import { Link } from 'react-router-dom';

const Error404 = () => {
	return (
		<div style={{ textAlign: 'center' }}>
			<ErrorMessage />
			<h1>Page not found!</h1>
			<Link
				style={{
					display: 'inline-block',
					padding: '10px',
					margin: '10px',
					textDecoration: 'underline',
					border: '1px solid black',
				}}
				to={'/'}
			>
				Back to main page
			</Link>
		</div>
	);
};

export default Error404;
```



```JS
import MainPage from './MainPage';  
import ComicsPage from './ComicsPage';  
import Error404 from './404';  
  
export { MainPage, ComicsPage, Error404 };
```




```JS
import { ComicsPage, Error404, MainPage } from '../pages';

const App = () => {
	return (
		<Router>
			<div className='app'>
				<AppHeader />
				<main>
					<Routes>
						<Route path={'/'} element={<MainPage />} />
						<Route path={'/comics'} element={<ComicsPage />} />
						<Route path={'*'} element={<Error404 />} />
					</Routes>
				</main>
			</div>
		</Router>
	);
};
```


### Динамические страницы

> Дальше используется `Router Dom v5`

`Match` хранит в себе данные о том, как именно `path` совпал с текущим адресом
`History` представляет из себя API для организации перехода между страницами
`Location` хранит в себе состояние положения роутера

Для работы с данными объектами используются хуки: `useParams`, `useHistory`, `useLocation`

Для реализации побочной ссылки, которая будет грузиться изнутри другого роута, нужно добавить новый роут с родительским путём и указать дополнительный динамический путь через `:`. То есть ссылка будет выглядеть следующим образом: `/comics/:comicId` - передаём параметр `comicId` в динамическую ссылку

`components > app > App.js`
```JS
import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';

import { MainPage, ComicsPage, Error404, SingleComicPage } from '../pages';
import AppHeader from '../appHeader/AppHeader';

const App = () => {
	return (
		<Router>
			<div className='app'>
				<AppHeader />
				<main>
					<Switch>
						<Route exact path='/'>
							<MainPage />
						</Route>
						<Route exact path='/comics'>
							<ComicsPage />
						</Route>
						<Route exact path='/comics/:comicId'>
							<SingleComicPage />
						</Route>
						<Route path='*'>
							<Error404 />
						</Route>
					</Switch>
				</main>
			</div>
		</Router>
	);
};

export default App;
```

В сервисе нужно иметь функцию, которая будет по `id` возвращать нужный нам комикс

`service > marvel.service.js`
```JS
const getComics = async (id) => {  
   const res = await request(`${_apiBase}comics/${id}?${_apiKey}`);  
   return _transformComics(res.data.results[0]);  
};
```

Далее в компоненте списка комиксов поменяем ссылку `a` на `Link` и в параметры ссылки передадим `item.id`, который будет ссылаться на определённый комикс

`components > comicsList > ComicsList.js`
```JS
function renderItems(arr) {
	const items = arr.map((item, i) => {
		return (
			<li className='comics__item' key={i}>
				// добавляем сюда динамическую ссылку в качестве линка
				<Link to={`/comics/${item.id}``}>
					<img src={item.thumbnail} alt={item.title} className='comics__item-img' />
					<div className='comics__item-name'>{item.title}</div>
					<div className='comics__item-price'>{item.price}</div>
				</Link>
			</li>
		);
	});

	return <ul className='comics__grid'>{items}</ul>;
}
```

Далее нам нужно реализовать страницу отдельного комикса

`components > pages > SingleComicPage.js`
```JS
import { useParams, Link } from 'react-router-dom';
import { useState, useEffect } from 'react';

import useMarvelService from '../../services/marvel.service';
import Spinner from '../Spinner/Spinner';
import ErrorMessage from '../ErrorMessage/ErrorMessage';
import AppBanner from '../appBanner/AppBanner';
import './singleComicPage.scss';

const SingleComicPage = () => {
	// берём id комикса из нашей адресной строки с помощью хука
	const { comicId } = useParams();
	// состояние комикса
	const [comic, setComic] = useState(null);
	// получаем функции для работы с сервером
	const { loading, error, getComics, clearError } = useMarvelService();

	useEffect(() => {
		// обновляем комикс при изменении id
		updateComic();
	}, [comicId]);

	// обновление комикса
	const updateComic = () => {
		clearError();
		getComics(comicId).then(onComicLoaded);
	};

	// тут устанавливаем комикс в стейт
	const onComicLoaded = (comic) => {
		setComic(comic);
	};

	const errorMessage = error ? <ErrorMessage /> : null;
	const spinner = loading ? <Spinner /> : null;
	const content = !(loading || error || !comic) ? <View comic={comic} /> : null;

	return (
		<>
			<AppBanner />
			{errorMessage}
			{spinner}
			{content}
		</>
	);
};

// рендерим сам компонент комикса
const View = ({ comic }) => {
	// деструктурируем ответ
	const { title, description, pageCount, thumbnail, language, price } = comic;

	return (
		<div className='single-comic'>
			<img src={thumbnail} alt={title} className='single-comic__img' />
			<div className='single-comic__info'>
				<h2 className='single-comic__name'>{title}</h2>
				<p className='single-comic__descr'>{description}</p>
				<p className='single-comic__descr'>{pageCount}</p>
				<p className='single-comic__descr'>Language: {language}</p>
				<div className='single-comic__price'>{price}</div>
			</div>
			<Link to='/comics' className='single-comic__back'>
				Back to all
			</Link>
		</div>
	);
};

export default SingleComicPage;
```

Экспортируем страницу одиночного комикса

`components > pages > index.js`
```JS
import MainPage from './MainPage';  
import ComicsPage from './ComicsPage';  
import Error404 from './404';  
import SingleComicPage from './SingleComicPage';  
  
export { MainPage, ComicsPage, Error404, SingleComicPage };
```

Чтобы слово *Comics* горело даже в отдельном комиксе, нужно убрать строгое сравнение ссылки через `exact` из компонента `AppHeader`

`components > appHeader > AppHeader.js`
```JS
import { Link, NavLink } from 'react-router-dom';
import './appHeader.scss';

const AppHeader = () => {
	return (
		<header className='app__header'>
			<h1 className='app__title'>
				<Link to='/'>
					<span>Marvel</span> information portal
				</Link>
			</h1>
			<nav className='app__menu'>
				<ul>
					<li>
						<NavLink exact activeStyle={{ color: '#9f0013' }} to='/'>
							Characters
						</NavLink>
					</li>
					/
					<li>
						<NavLink activeStyle={{ color: '#9f0013' }} to='/comics'>
							Comics
						</NavLink>
					</li>
				</ul>
			</nav>
		</header>
	);
};

export default AppHeader;
```

![](_png/Pasted%20image%2020230313161909.png)