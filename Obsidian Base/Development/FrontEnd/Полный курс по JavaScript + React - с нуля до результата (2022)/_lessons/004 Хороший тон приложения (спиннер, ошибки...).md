
Далее на сайт нужно добавить спиннер, который будет показывать пользователю, что информация загружается - это его успокоит и упростит взаимодействие с сайтом

Можно просто скачать любой спиннер на [выбор](https://icons8.com/preloaders/)
![](_png/Pasted%20image%2020230303104740.png)

А можно создать [свой](https://loading.io/) спиннер
![](_png/Pasted%20image%2020230303104614.png)

Первым делом создаём компонент со спиннером, который будем использовать на странице

`src > components > Spinner > Spinner.js`
```JS
const Spinner = () => {  
   return (  
      <svg         xmlns='http://www.w3.org/2000/svg'  
         style={{ margin: '0 auto', background: 'none', display: 'block' }}  
         width='200px'  
         height='200px'  
         viewBox='0 0 100 100'  
         preserveAspectRatio='xMidYMid'  
      >  
         <g transform='translate(80,50)'>  
            <g transform='rotate(0)'>  
               <circle cx='0' cy='0' r='7' fill='#1c4595' fillOpacity='1'>  
                  <animateTransform  
                     attributeName='transform'  
                     type='scale'  
                     begin='-0.875s'  
                     values='1.5 1.5;1 1'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                  ></animateTransform>  
                  <animate                     attributeName='fillOpacity'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                     values='1;0'  
                     begin='-0.875s'  
                  ></animate>  
               </circle>  
            </g>  
         </g>  
         <g transform='translate(71.21320343559643,71.21320343559643)'>  
            <g transform='rotate(45)'>  
               <circle cx='0' cy='0' r='7' fill='#1c4595' fillOpacity='0.875'>  
                  <animateTransform  
                     attributeName='transform'  
                     type='scale'  
                     begin='-0.75s'  
                     values='1.5 1.5;1 1'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                  ></animateTransform>  
                  <animate                     attributeName='fillOpacity'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                     values='1;0'  
                     begin='-0.75s'  
                  ></animate>  
               </circle>  
            </g>  
         </g>  
         <g transform='translate(50,80)'>  
            <g transform='rotate(90)'>  
               <circle cx='0' cy='0' r='7' fill='#1c4595' fillOpacity='0.75'>  
                  <animateTransform  
                     attributeName='transform'  
                     type='scale'  
                     begin='-0.625s'  
                     values='1.5 1.5;1 1'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                  ></animateTransform>  
                  <animate                     attributeName='fillOpacity'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                     values='1;0'  
                     begin='-0.625s'  
                  ></animate>  
               </circle>  
            </g>  
         </g>  
         <g transform='translate(28.786796564403577,71.21320343559643)'>  
            <g transform='rotate(135)'>  
               <circle cx='0' cy='0' r='7' fill='#1c4595' fillOpacity='0.625'>  
                  <animateTransform  
                     attributeName='transform'  
                     type='scale'  
                     begin='-0.5s'  
                     values='1.5 1.5;1 1'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                  ></animateTransform>  
                  <animate                     attributeName='fillOpacity'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                     values='1;0'  
                     begin='-0.5s'  
                  ></animate>  
               </circle>  
            </g>  
         </g>  
         <g transform='translate(20,50.00000000000001)'>  
            <g transform='rotate(180)'>  
               <circle cx='0' cy='0' r='7' fill='#1c4595' fillOpacity='0.5'>  
                  <animateTransform  
                     attributeName='transform'  
                     type='scale'  
                     begin='-0.375s'  
                     values='1.5 1.5;1 1'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                  ></animateTransform>  
                  <animate                     attributeName='fillOpacity'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                     values='1;0'  
                     begin='-0.375s'  
                  ></animate>  
               </circle>  
            </g>  
         </g>  
         <g transform='translate(28.78679656440357,28.786796564403577)'>  
            <g transform='rotate(225)'>  
               <circle cx='0' cy='0' r='7' fill='#1c4595' fillOpacity='0.375'>  
                  <animateTransform  
                     attributeName='transform'  
                     type='scale'  
                     begin='-0.25s'  
                     values='1.5 1.5;1 1'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                  ></animateTransform>  
                  <animate                     attributeName='fillOpacity'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                     values='1;0'  
                     begin='-0.25s'  
                  ></animate>  
               </circle>  
            </g>  
         </g>  
         <g transform='translate(49.99999999999999,20)'>  
            <g transform='rotate(270)'>  
               <circle cx='0' cy='0' r='7' fill='#1c4595' fillOpacity='0.25'>  
                  <animateTransform  
                     attributeName='transform'  
                     type='scale'  
                     begin='-0.125s'  
                     values='1.5 1.5;1 1'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                  ></animateTransform>  
                  <animate                     attributeName='fillOpacity'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                     values='1;0'  
                     begin='-0.125s'  
                  ></animate>  
               </circle>  
            </g>  
         </g>  
         <g transform='translate(71.21320343559643,28.78679656440357)'>  
            <g transform='rotate(315)'>  
               <circle cx='0' cy='0' r='7' fill='#1c4595' fillOpacity='0.125'>  
                  <animateTransform  
                     attributeName='transform'  
                     type='scale'  
                     begin='0s'  
                     values='1.5 1.5;1 1'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                  ></animateTransform>  
                  <animate                     attributeName='fillOpacity'  
                     keyTimes='0;1'  
                     dur='1s'  
                     repeatCount='indefinite'  
                     values='1;0'  
                     begin='0s'  
                  ></animate>  
               </circle>  
            </g>  
         </g>  
      </svg>  
   );  
};  
  
export default Spinner;
```

Так будет выглядеть компонент ошибки:

`src > components > ErrorMessage > ErrorMessage.js`
```JS
import React from 'react';  
import ErrorIcon from './error.gif';  
  
const ErrorMessage = () => {  
   return (  
      <img         style={{  
            display: 'block',  
            width: '250px',  
            height: '250px',  
            margin: '0 auto',  
            objectFit: 'contain',  
         }}  
         src={ErrorIcon}  
         alt='Ошибка'  
      />  
   );  
};  
  
export default ErrorMessage;
```


Так же можно отметить, что мы можем положить нужное изображение в паблик папку и получить нужное нам изображение через переменную окружения

![](_png/Pasted%20image%2020230303140337.png)

И тут мы реализуем два новых состояния и метод `onError`, которые будут отвечать за отображение ошибки и спиннера 

`src > components > randomChar > RandomChar.js`
```JS
import './randomChar.scss';  
import mjolnir from '../../resources/img/mjolnir.png';  
import { Component } from 'react';  
import MarvelService from '../../services/marvel.service';  
import Spinner from '../Spinner/Spinner';  
import ErrorMessage from '../ErrorMessage/ErrorMessage';  
  
class RandomChar extends Component {  
   constructor(props) {  
      super(props);  
      this.updateChar();  
   }  
  
   state = {  
      char: {},  
      loading: true, // состояние загрузки компонента  
      error: false, // состояние ошибки  
   };  
  
   marvelService = new MarvelService();  
  
   onCharLoaded = (char) => {  
      // так же тут дополняем информацию по загрузке  
      this.setState({ char, loading: false });  
   };  
  
   // этот метод будет срабатывать при ошибке  
   onError = () => {  
      this.setState({ loading: false, error: true });  
   };  
  
   updateChar = () => {  
      const id = Math.floor(Math.random() * (1011400 - 1011000) + 1011000);  
      // const id = 10;  
  
      // так же дополняем обработку ответа от сервера реагированием на ошибку      this.marvelService.getCharacter(id).then(this.onCharLoaded).catch(this.onError);  
   };  
  
   render() {  
      const { char, loading, error } = this.state;  
  
      const showError = error ? <ErrorMessage /> : null;  
      const showLoading = loading ? <Spinner /> : null;  
      const showContent = !(error || loading) ? <View char={char} /> : null;  
  
      return (  
         <div className='randomchar'>  
            {/* показываем на странице то, что подошло под условия */}  
            {showContent}  
            {showLoading}  
            {showError}  
            <div className='randomchar__static'>  
               <p className='randomchar__title'>  
                  Random character for today!  
                  <br />  
                  Do you want to get to know him better?  
               </p>  
               <p className='randomchar__title'>Or choose another one</p>  
               <button className='button button__main'>  
                  <div className='inner'>try it</div>  
               </button>  
               <img src={mjolnir} alt='mjolnir' className='randomchar__decoration' />  
            </div>  
         </div>  
      );  
   }  
}  
  
// динамическую информацию нашего компонента вынесем в отдельный компонент  
const View = ({ char }) => {  
   const { name, description, thumbnail, homepage, wiki } = char;  
  
   const sliceDescription = (description) => {  
      if (description.length > 150) {  
         return description.slice(0, 150) + '...';  
      }  
      return description;  
   };  
  
   return (  
      <div className='randomchar__block'>  
         <img src={thumbnail} alt='Random character' className='randomchar__img' />  
         <div className='randomchar__info'>  
            <p className='randomchar__name'>{name}</p>  
            <p className='randomchar__descr'>  
               {description  
                  ? sliceDescription(description)  
                  : 'Данных про данного персонажа нет'}  
            </p>  
            <div className='randomchar__btns'>  
               <a href={homepage} className='button button__main'>  
                  <div className='inner'>homepage</div>  
               </a>  
               <a href={wiki} className='button button__secondary'>  
                  <div className='inner'>Wiki</div>  
               </a>  
            </div>  
         </div>  
      </div>  
   );  
};  
  
export default RandomChar;
```

Итог: мы имеем отображение загрузки и ошибки

![](_png/Pasted%20image%2020230303144113.png)

![](_png/Pasted%20image%2020230303142406.png)