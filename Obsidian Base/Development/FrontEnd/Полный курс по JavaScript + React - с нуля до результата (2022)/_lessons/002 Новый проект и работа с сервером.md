
Будет разрабатываться реальный сайт на основе данных, полученных с сайта по вселенной [Marvel](https://developer.marvel.com/). Отсюда нам нужно только произвести настройку доступности отправляемых запросов (ставим ото всюду `*.`) и сам ключ для совершения запросов `abfdaba95091affea928543eb9253ded`

![](_png/Pasted%20image%2020221025093836.png)

Чтобы не писать путь до изображения, можно просто вставить его как объект - вебпак поймёт

![](_png/Pasted%20image%2020230224115711.png)

Далее нужно реализовать сервис, который будет отвечать за взаимодействие фронта с бэком

![|500](_png/Pasted%20image%2020230224171827.png)

И тут мы описываем класс, который будет содержать методы, получающие данные с сервера

`src > services > marvel.service.js`
```JS
// это класс для взаимодействия фронта с апи марвела  
class MarvelService {  
   api = 'abfdaba95091affea928543eb9253ded';  
  
   // данная функция будет фетчить данные с сервера и возвращать их  
   getResource = async (url) => {  
      let res = await fetch(url);  
  
      if (!res.ok) {  
         throw new Error(`Couldn't fetch ${url}, status: ${res.status}`);  
      }  
  
      return await res.json();  
   };  
  
   // эта функция будет получать всех персонажей по переданной ссылке  
   getAllCharacters = async () => {  
      return await this.getResource(`https://gateway.marvel.com:443/v1/public/characters?limit=9&offset=36&apikey=${this.api}`);  
   };  
  
   // эта функция будет получать одного персонажа по id  
   getCharacter = async (id) => {  
      return await this.getResource(`https://gateway.marvel.com:443/v1/public/characters/${id}?apikey=${this.api}`);  
   };  
}  
  
export default MarvelService;
```

Получим для примера ответ от сервера в виде объекта:

`src > index.js`
```JSX
// создаём инстанс класса  
const marvelService = new MarvelService();  
  
// получаем персонажей с сервера и выводим их в консоль  
marvelService.getAllCharacters().then(res => console.log(res));  
  
// получаем одного персонажа с сервера  
marvelService.getCharacter(1009567).then(res => console.log(res));  
  
const root = ReactDOM.createRoot(document.getElementById('root'));  
  
root.render(  
   <React.StrictMode>  
      <App />  
   </React.StrictMode>  
);
```

Первым нам вышел персонаж по `id`, а вторым ответом мы получили ограниченный массив персонажей (9 штук)

![](_png/Pasted%20image%2020230224170428.png)

Далее нам нужно доработать метод - вынесем повторяющиеся данные в отдельные поля класса

`src > services > marvel.service.js`
```JS
// это класс для взаимодействия фронта с апи марвела  
class MarvelService {  
   _apiBase = 'https://gateway.marvel.com:443/v1/public/';  
   _apiKey = 'apikey=abfdaba95091affea928543eb9253ded';  
  
   // данная функция будет фетчить данные с сервера и возвращать их  
   getResource = async (url) => {  
      let res = await fetch(url);  
  
      if (!res.ok) {  
         throw new Error(`Couldn't fetch ${url}, status: ${res.status}`);  
      }  
  
      return await res.json();  
   };  
  
   // эта функция будет получать всех персонажей по переданной ссылке  
   getAllCharacters = async () => {  
      return await this.getResource(`${this._apiBase}characters?limit=9&offset=36&${this._apiKey}`);  
   };  
  
   // эта функция будет получать одного персонажа по id  
   getCharacter = async (id) => {  
      return await this.getResource(`${this._apiBase}characters/${id}?${this._apiKey}`);  
   };  
}  
  
export default MarvelService;
```

И далее попробуем вывести массив имён из того ответа, который приходит нам с сервера:

`src > index.js`
```JS
marvelService.getAllCharacters().then(res => res.data.results.forEach(item => console.log(item.name)));
```

![](_png/Pasted%20image%2020230224170639.png)
