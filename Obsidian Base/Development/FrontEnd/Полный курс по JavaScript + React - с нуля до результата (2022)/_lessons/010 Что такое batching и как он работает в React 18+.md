
==**Batching**== - это объединение обновления нескольких состояний в одну операцию для улучшения производительности. 
Объединение нескольких обновлений позволяет экономить ресурсы ПК за счёт единоразового перерендера

У нас есть функция, которая вызывает внутри себя срабатывание изменения двух разных состояний, то есть компонент должен перерендерится два раза и вывести два лога в консоль

![](_png/Pasted%20image%2020230312180804.png)

Однако при каждом срабатывании функции и изменении двух состояний, мы получаем только один лог в консоль - обе эти операции совмещаются 

![](_png/Pasted%20image%2020230312180808.png)

Но если поместить вызов изменения внутрь колбэка (то есть изменения происходят асинхронно), то мы будем получать два лога в консоль, так как эти состояния будут меняться отдельно друг от друга и каждый раз обновлять компонент

![](_png/Pasted%20image%2020230312181002.png)

![](_png/Pasted%20image%2020230312181004.png)

Так же если запихнуть `log()` в компонент `CharList`, то в консоли выведется сразу несколько таких логов, так как наши изменения состояний находятся в асинхронных функциях

Однако тут используется версия `React 18`, в котором оптимизированы некоторые изменения состояний и их бэтчинг, что сокращает количество перерендеров

![](_png/Pasted%20image%2020230312182152.png)

![](_png/Pasted%20image%2020230312181820.png)

Однако, если нам нужно разъединить операции обновления, то мы можем воспользоваться функцией `flushSync` (эту функцию нужно использовать отдельно на каждую операцию)

![](_png/Pasted%20image%2020230312183726.png)

![](_png/Pasted%20image%2020230312183705.png)





