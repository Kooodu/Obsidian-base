
## 001 Компонент отзыва

Сейчас нужно реализовать компонент отзыва. 
Он будет в себя принимать те же пропсы, что описаны в `ReviewModel`

`components / Review / Review.props.ts`
```TS
import { DetailedHTMLProps, HTMLAttributes } from 'react';  
import { ReviewModel } from '../../interfaces/product.interface';  
  
export interface ReviewProps  
   extends DetailedHTMLProps<HTMLAttributes<HTMLDivElement>, HTMLDivElement> {  
   review: ReviewModel;  
}
```

Сам компонент обзора:

`components / Review / Review.tsx`
```TSX
import React from 'react';
import cn from 'classnames';
import { format } from 'date-fns';
import { ru } from 'date-fns/locale';
import styles from './Review.module.css';
import UserIcon from './user.svg';
import { ReviewProps } from './Review.props';
import { Rating } from '../Rating/Rating';

export const Review = ({ review, className, ...props }: ReviewProps): JSX.Element => {
	const { name, title, rating, description, createdAt } = review;

	return (
		<div className={cn(styles.review, className)} {...props}>
			<UserIcon className={styles.user} />
			<div className={styles.title}>
				<span className={styles.name}>{name}:</span>&nbsp;&nbsp;
				<span>{title}</span>
			</div>
			<div className={styles.date}>
				{/*
				 * создаём новую дату из createdAt,
				 * далее указываем дату (заглавные - пропись)
				 * и потом указываем язык
				 */}
				{format(new Date(createdAt), 'dd MMMM yyyy', { locale: ru })}
			</div>
			<div className={styles.rating}>
				<Rating rating={rating} />
			</div>
			<div className={styles.description}>{description}</div>
		</div>
	);
};
```

Стили компонента обзора:

`components / Review / Review.module.css`
```CSS
.review {  
   display: grid;  
   grid-template-columns: [start] auto 1fr auto auto [end];  
   align-items: center;  
   gap: 10px;  
  
   font-size: 14px;  
   line-height: 24px;  
}  
  
.description {  
   grid-column: start / end;  
}  
  
.date {  
   margin-right: 10px;  
}  
  
.name {  
   font-weight: bold;  
}  
  
@media (max-width: 640px) {  
   .review {  
      grid-template-columns: [start] 30px [titlestart] auto [dateend] 1fr [end];  
   }  
  
   .title {  
      grid-column: titlestart / end;  
   }  
  
   .date {  
      grid-column: start / dateend;  
   }  
}  
  
@media (max-width: 480px) {  
  
   .rating {  
      grid-column: start / end;  
   }  
  
   .date {  
      grid-column: start / end;  
   }  
}
```

Сокращаем путь до компонента

`components / index.ts`
```TS
export * from './Review/Review';
```

Компонент отзыва будет выводить в отдельной карточке, которая будет изначально закрыта. Для открытия и закрытия будем использовать `useState`, который будет изменяться при нажатии на кнопку в первой карточке

`components / Product / Product.tsx`
```TSX
export const Product = ({ product }: ProductProps): JSX.Element => {  
   const [isReviewOpened, setIsReviewOpened] = useState<boolean>(false);  
  
   return (  
      <>  
         {/* обернём продукт в карточку */}  
         <Card className={styles.product}>  
            /// CODE ....
            
            {/* тут будут находиться кнопки */}
				<div className={styles.actions}>
					<Button appearance={'primary'}>Узнать подробнее</Button>
					<Button
						appearance={'ghost'}
						arrow={isReviewOpened ? 'down' : 'right'}
						className={styles.review}
						{/* меняем состояние отзывов */}
						onClick={() => setIsReviewOpened(!isReviewOpened)}
					>
						Читать отзывы
					</Button>
				</div>
         </Card>  
         <Card  
            color={'blue'}  
            className={cn(styles.reviews, {  
               [styles.opened]: isReviewOpened,  
               [styles.closed]: !isReviewOpened,  
            })}  
         >  
            {product.reviews.map(r => (  
               <Review key={r._id} review={r} />  
            ))}  
         </Card>  
      </>  
   );  
};
```

Стили для открытого и закрытого меню с отзывами

`components / Product / Product.module.css`
```CSS
/*
	* Вторая карточка
*/

.opened {
	max-height: auto;
	padding: 30px;
}

/* чтобы нормально заанимировать изменение высоты, нам нельзя использовать display: none */
.closed {
	max-height: 0;
	padding: 0;
	overflow: hidden;
}
```

Итог:

![](_png/Pasted%20image%2020230208101929.png)

## 002 Форма отзыва







## 003 useForm







## 004 Работа с формами







## 005 Проброс ref







## 006 Обработка ошибок







## 007 Упражнение - Обработка ошибок Rating







## 008 Отправка запроса со страницы







## 009 useRef







## 010 Упражнение - Исправление бага useReducer







