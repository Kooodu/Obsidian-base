
## 001 Компоненты страниц

Сейчас нам нужно немного переверстать страницу в целях оптимизации переписываемого кода:
- Сейчас наша страница сделана только под курсы, а не под все виды материалов (книги, сервисы и товары)
- Если мы оставим так как есть, то мы должны будем стили для страницы добавить в папку `styles`

Создадим структуру, где мы разместим компонент основной страницы.

![](_png/Pasted%20image%2020230131190751.png)

Компонент страницы будет принимать в себя первую категорию меню, пропс страницы и продукты

`page-components / TopPageComponent / TopPageComponent.props.ts`
```TS
import { TopLevelCategory, TopPageModel } from '../../interfaces/page.interface';
import { ProductModel } from '../../interfaces/product.interface';

export interface TopPageComponentProps {
	firstCategory: TopLevelCategory;
	page: TopPageModel;
	products: ProductModel[];
}
```

Перенесём вывод длинны с алиаса в компонент страницы. Тут пропмы будут принимать от алиаса пропс страницы, продукта и выбранной категории меню

`page-components / TopPageComponent / TopPage.component.tsx`
```TSX
import styles from './TopPageComponent.module.css';
import { TopPageComponentProps } from './TopPageComponent.props';

export const TopPageComponent = ({
	page,
	products,
	firstCategory,
}: TopPageComponentProps): JSX.Element => {
	return <>{products && products.length}</>;
};
```

Далее, для сокращения пути, экспортируем компонент из папки с компонентами страниц

`page-components / index.ts`
```TS
export * from './TopPageComponent/TopPage.component';
```

Данные изменения нужно будет внести в алиас, где будем возвращать сразу компонент страницы, который в себя будет принимать нужные нам значения

`pages / [type] / [alias].tsx`
```TSX
/// CODE ...

function TopPage({ page, products, firstCategory }: TopPageProps): JSX.Element {
	return <TopPageComponent 
				page={page} 
				firstCategory={firstCategory} 
				products={products} 
			/>;
}

/// CODE ...

interface TopPageProps extends Record<string, unknown> {
	menu: MenuItem[];
	firstCategory: TopLevelCategory; // меняем тип на тот, что в интерфейсе
	page: TopPageModel;
	products: ProductModel[];
}

/// CODE ...
```

Можно увидеть, что отображение страницы никак не изменилось

![](_png/Pasted%20image%2020230131193108.png)

## 002 Вёрстка страницы продуктов - 1

Вёрстка страницы располагается тут: [Вёрстка страницы продуктов](_code/Вёрстка%20страницы%20продуктов.md)

В процессе была замечена такая ошабка, что `display: none` покрывался свойством `display: grid`. 

![](_png/Pasted%20image%2020230204155626.png)

Чтобы исправить ошибку, нужно воспользоваться директивой CSS `!important`, которая делает выбранный нами стиль - главным

`Layout.module.css`
```CSS
@media (max-width: 765px) {
	.wrapper {
		grid-template-columns: minmax(320px, 1fr);
		grid-template-areas:
			"header"
			"body"
			"footer";
	}

	.sidebar {
		display: none !important;
	}

	.header {
		display: block;
	}
}
```

И теперь сайдбар скрыт.

![](_png/Pasted%20image%2020230204155632.png)

## 003 Regex отображения цены

Чтобы нормально написать регулярное выражение, можно воспользоваться сторонними ресурсами, которые помогают заранее определиться с делением строк и чисел - [RegEx](https://regex101.com/)

1) Мы должны выбрать строки `\B`
2) Мы должны найти те строки, которые удовлетворяют условию `(?=)` 
3) Где идут цифры `\d` в количестве трёх штук `{3}`
4) Таких групп может быть несколько `+`
5) После этих групп больше не идёт никаких цифр `(?!\d)`

*Примечание:* 
1. Сам RegExp
2. Наш набор шаблонных данных

![](_png/Pasted%20image%2020230204192640.png)

В данном примере мы используем функцию `replace()`, которая изменяет выбранную нами строку, принимая в себя следующие параметры:
- `/\B(?=(\d{3})+(?!\d))/g` - само регулярное выражение. `/RegExp/g` - глобальный поиск определённого шаблона
- `' '` - строка, на которую мы меняем найденные значения

Функция `concat()` объединяет строки, и в данном случае она просто добавит в конец зарплат знак рубля

`helpers / helpers.tsx`
```TSX
export const priceRu = (price: number): string =>
	price
		.toString()
		.replace(/\B(?=(\d{3})+(?!\d))/g, ' ')
		.concat(' Р');
```

Остаётся только добавить функцию `priceRu(зарплата)` в компонент `HhData` 

`components / HhData / HhData.tsx`
```TSX
<div>
	<div className={styles.title}>Профессионал</div>
	<div className={styles.salaryValue}>{priceRu(seniorSalary)}</div>
	<div className={styles.rate}>
		<RateIcon className={styles.filled} />
		<RateIcon className={styles.filled} />
		<RateIcon className={styles.filled} />
	</div>
</div>
```

Так выглядит итоговая страница после изменения значений зарплат

![](_png/Pasted%20image%2020230204193624.png)

## 006 Вставка HTML

Задача: нужно перевести html-код, получаемый с сервера, в обычную вёрстку

![](_png/Pasted%20image%2020230205165546.png)




















## 007 useReducer







## 008 Компонент сортировки







## 009 Reducer сортировки








