
## 001 Типы тестирования

![](_png/Pasted%20image%2020230403073020.png)

e2e тесты можно проводить как на АПИ, так и через браузер (фронт-приложение)

Тестирование АПИ:
- Jest
- Mocha
- Chai

Тестирование фронта:
- Cypress
- Protractor
- Selenium

![](_png/Pasted%20image%2020230403073225.png)

Для интеграционного тестирования нам не обязательно поднимать всё приложение. Тут достаточно поднять два инстанса 

![](_png/Pasted%20image%2020230403073446.png)

Для юнита нужно лишь вписать тесты под отдельный модуль

![](_png/Pasted%20image%2020230403073504.png)

## 002 Тесты отзывов

e2e тесты хранятся в папке `test`. Там же находится файл настроек, где и указано, какие тесты должен запускать `Jest`

![](_png/Pasted%20image%2020230403074959.png)

Далее уже в той же папке лежит и сам e2e тест приложения.

- `describe` - описывает запускаемую группу тестов
- `beforeEach` - функция, которая выполняется до каждого отдельного теста
- `beforeAll` - выполняется один раз перед всеми тестами
- `afterAll` - выполняется один раз после всех тестов
- `it` - описывает действия на каждом отдельном тесте

- `app` - переменная, которая получает из moduleFixture (переменная с модулями для теста) всё целиковое приложение
- `Test.createTestingModule` - фиксирует ровно те модули в приложении, которые нам нужно запустить (конкретно тут вызвается всё приложение)
- `request` - маленькая библиотечка из supertest, которая позволяет удобно общаться с локальным АПИ

`test > review.e2e-spec.ts`
```TS
import { Test, TestingModule } from '@nestjs/testing';
import { INestApplication } from '@nestjs/common';
import * as request from 'supertest';
import { AppModule } from './../src/app.module';

// describe описывает группу тестов
describe('AppController (e2e)', () => {
	// это всё приложение неста
	let app: INestApplication;

	// данный код будет выполняться перед каждым запуском выполнения следующего теста
	beforeEach(async () => {
		// создаёт отдельный тестовый модуль
		const moduleFixture: TestingModule = await Test.createTestingModule({
			// конкретно тут собирается и импортируется всё приложение
			imports: [AppModule],
		}).compile(); // компиляция

		// создаём уже само приложение неста
		app = moduleFixture.createNestApplication();

		// инициализация приложения
		await app.init();
	});

	// выполняет отдельный кейс теста
	it('/ (GET)', () => {
		return request(app.getHttpServer()) // получаем http-сервер приложения
			.get('/') // отправляем запрос на индекс-роут
			.expect(200) // ожидаем 200
			.expect('Hello World!'); // ожидаем приветствие
	});
});
```





## 003 Unit тесты




