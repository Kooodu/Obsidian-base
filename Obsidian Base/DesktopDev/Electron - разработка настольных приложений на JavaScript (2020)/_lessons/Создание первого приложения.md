# Create a Desktop App With JavaScript & Electron

## 1) Генерация проекта Electron-приложения

Через npm-пакет ==electron-app== создадим шаблон electron-приложения
Дальше установим плагин для уведомлений на ОС и сам изменитель разрешений изобаржений
И командой `npx electronmon .` мы будем запускать нормальное обновление приложения при каждом изменении кода (оно будет перезагружаться, если будем менять JS-код и обновлять страницу браузера, если будем корректировать фронт)

```bash
npm init electron-app@latest my-electron-img-resizer

npm i toastify-js resize-img --save-dev

npx electronmon .
```

## 2) Пишем начальную работу окон (main process)



```JS
// 1

// основные библиотеки электрона
const { app, BrowserWindow, Menu } = require("electron");
// библиотеки ноды
// модуль работы с путями на компьютере
const path = require("path");

// 2

// проверяем, находимся ли мы в режиме разработчика
const isDev = process.env.NODE_ENV !== "production";
// проверяет, является ли система маком
const isMac = process.platform !== "darwin";

// 8

// Шаблон нашего собственного меню приложения (находится в самом верху)
const menu = [
	// так же мы можем вставить название меню по условию ...(условие ? [одно меню] : [пустой либо другое меню])
	// если мы пользуемся маком, то выведем меню с названием нашего приложения
	...(isMac
		? [
				{
					label: app.name,
					submenu: [
						{ label: "About", click: () => createAboutWindow() },
					],
				},
		  ]
		: []),
	// мы можем создать наше кастомное меню
	{
		// название группы меню
		label: "CunsomFile",
		// подменю
		submenu: [
			{
				// название подменю
				label: "Quit",
				// функция этого подменю
				click: () => app.quit(),
				// быстрые сочетания клавиш для срабатывания функции
				accelerator: "Ctrl+W",
			},
		],
	},
	// а можем добавить встроенные функции меню
	{
		role: "fileMenu",
	},
	// если сидим не на маке, то создадим пункт Help
	...(!isMac
		? [
				{
					label: "Help",
					submenu: [
						{ label: "About", click: () => createAboutWindow() },
					],
				},
		  ]
		: []),
];

if (require("electron-squirrel-startup")) {
	app.quit();
}

// 3

// функция для создания нового основного окна браузера
const createMainWindow = () => {
	// создаём окно
	const mainWindow = new BrowserWindow({
		// если мы находимся в режиме разработчика, то делаем окно шире (для девтулза)
		width: isDev ? 1100 : 600,
		height: 600,
		webPreferences: {
			// подключаем прелоад - пишем актуальный путь до него от этого файла
			preload: path.join(__dirname, "../preload/preload.js"),
		},
	});

	// загружаем браузерную страницу - основное окно браузера
	mainWindow.loadFile(path.join(__dirname, "../renderer/index.html"));

	// если мы находимся в режиме разработки, то открываем инструменты разработчика
	if (isDev) {
		mainWindow.webContents.openDevTools();
	}
};

// 4

// функция для создания окна о приложении
const createAboutWindow = () => {
	// создаём окно
	const aboutWindow = new BrowserWindow({
		width: 300,
		height: 300,
		autoHideMenuBar: true,
		webPreferences: {
			// подключаем прелоад - пишем актуальный путь до него от этого файла
			preload: path.join(__dirname, "../preload/preload.js"),
		},
	});

	// загружаем браузерную страницу - основное окно браузера
	aboutWindow.loadFile(path.join(__dirname, "../renderer/about.html"));
};

// 5

// когда приложение будет готово, запустим рендер окна
app.whenReady().then(() => {

	// 6

	// запускаем функцию создания окна
	createMainWindow();

	// 7

	// Подставляем в приложение наше собственное меню
	const mainMenu = new Menu.buildFromTemplate(menu);
	Menu.setApplicationMenu(mainMenu);

	// 9

	// если приложение активно, то не даём запустить новый инстанс приложения
	app.on("activate", () => {
		if (BrowserWindow.getAllWindows().length === 0) {
			createWindow();
		}
	});
});

// 10

// если мы сидим на маке, то отключаем инстанс приложения при закрытии окна
app.on("window-all-closed", () => {
	if (isMac) {
		app.quit();
	}
});

```

Как итог наше приложение запускается в режиме разработчика шире и с девтулзом

![](_png/Pasted%20image%2020221117175440.png)

Мы можем кликнуть по окну "О приложении"

![](_png/Pasted%20image%2020221117175437.png)

И это окно вызовется

![](_png/Pasted%20image%2020221117175754.png)

И так же закрыть приложение через наше кастомное меню

![](_png/Pasted%20image%2020221117175758.png)


## 3) Пишем фронт (renderer процесс)










