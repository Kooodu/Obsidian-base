## Глава 10. Динамика

#### **Урок 1.** **Rigid** **и** **Collision** **body**

- **_Rigid_** **_body_** – добавляет объекту гравитацию. Просчёт и анимация гравитации начинает просчитываться, когда мы нажимаем на play
![](_png/Pasted%20image%2020221026202136.png)
![](_png/Pasted%20image%2020221026202133.png)
- **_Collision_** **_Body_** – тег, который является телом соударения, но на него не действует гравитация
![](_png/Pasted%20image%2020221026202130.png)
- Можно в реальном времени смотреть на взаимодействие объектов друг с другом пока идёт play
![](_png/Pasted%20image%2020221026202127.png)
- В настройках у обоих тэгов ОБОИХ объектов во вкладке Collision, нужно настраивать Bounce (отскок) и Friction (плотность прилегания объекта)
![](_png/Pasted%20image%2020221026202124.png)
- И когда мы настроили теги у кубика и земли, взаимодействие стало плотнее
![](_png/Pasted%20image%2020221026202121.png)
- Зажав ctrl, можно выбрать сразу оба тега и настраивать их тоже вместе
![](_png/Pasted%20image%2020221026202118.png)
- Так же можно увести значения за 100%
![](_png/Pasted%20image%2020221026202115.png)
- Чтобы быстро скопировать тэг, можно закинуть внутрь иерархии остальные объекты и скопировать тэг для дочерних объектов, а дальше тыкнув на shift+g разъединить иерархию
![](_png/Pasted%20image%2020221026202106.png)
![](_png/Pasted%20image%2020221026202103.png)
- Данный параметр создаёт шум при взаимодействии физических тел. При падении на дальнейший вектор отскока объекта будет влиять шумность поверхности
![](_png/Pasted%20image%2020221026202058.png)
- Так же можно накинуть тэг просто на клонер и работать со всеми объектами, а не с одним клонером как с целым
![](_png/Pasted%20image%2020221026202055.png)
- Так же при работе с нулём, нужно поменять уже первый параметр и в нём выбрать либо работу как с индивидуальными элементами, либо как с одним вместе
![](_png/Pasted%20image%2020221026202052.png)
- Вкладка force отвечает за силу, которую имеют наши объекты. Выделенные два параметра отвечают за количество теряемой энергии (линейной и угловой) при соударении (грубо говоря, влияет на скорость остановки объектов)
![](_png/Pasted%20image%2020221026202047.png)
- Wind создаёт бесконечный источник (как солнце) ветра
![](_png/Pasted%20image%2020221026202044.png)
![](_png/Pasted%20image%2020221026202040.png)
- Скорость ветра, неравномерность ветра, порывность ветра
![](_png/Pasted%20image%2020221026202036.png)
- Создали через клонер объект соударения с гравитацией
![](_png/Pasted%20image%2020221026202032.png)
![](_png/Pasted%20image%2020221026202027.png)
- **Turbulence** создаёт шум и разбрасывает частицы (объекты)
![](_png/Pasted%20image%2020221026202022.png)
![](_png/Pasted%20image%2020221026202017.png)
- Далее можно ограничивать работу данных симуляций с помощью falloff как и у эффекторов
![](_png/Pasted%20image%2020221026202012.png)
![](_png/Pasted%20image%2020221026202007.png)
- Так же можно комбинировать разные фаллофы
![](_png/Pasted%20image%2020221026202005.png)

#### **Урок 2.** **Emitter**

- Данный инструмент выпускает из себя частицы
![](_png/Pasted%20image%2020221026201958.png)
- Количество испускаемых частиц во вьюпорте и на рендере
![](_png/Pasted%20image%2020221026201954.png)
- Время испускания частиц
![](_png/Pasted%20image%2020221026201952.png)
- Хаотичность
![](_png/Pasted%20image%2020221026201949.png)
- Время жизни частиц и вариация их времени жизни (50% - 25-75 кадров, вместо стоковых 50)
![](_png/Pasted%20image%2020221026201945.png)
- Скорость частиц
![](_png/Pasted%20image%2020221026201942.png)
- Чтобы вместо шурешек видеть объекты, нужно положить объект внутрь иерархии и в эмитере поставить галку на отображении объектов
![](_png/Pasted%20image%2020221026201939.png)
- С течением жизни частицы будут уменьшаться
![](_png/Pasted%20image%2020221026201937.png)
-
![](_png/Pasted%20image%2020221026201934.png)
- Во вкладке эмитера можно настраивать сам эмиттер: его форму, размеры, угол распускания
![](_png/Pasted%20image%2020221026201930.png)
- Так же в трейсер можно закинуть эмиттер и получить пути от испускаемых объектов
![](_png/Pasted%20image%2020221026201927.png)
- А далее через sweep выдавить из путей линии движения частиц
![](_png/Pasted%20image%2020221026201923.png)
- Чем больше тут значение, тем меньше будет граней полигонов
![](_png/Pasted%20image%2020221026201919.png)
- В трэйс закинули эмиттер
![](_png/Pasted%20image%2020221026201914.png)
- Уменьшаем к концу линии её толщину
![](_png/Pasted%20image%2020221026201911.png)
- **Gravity** - симуляционный объект, который добавляет частицам гравитацию
![](_png/Pasted%20image%2020221026201907.png)
- Смена силы воздействия
![](_png/Pasted%20image%2020221026201903.png)
- Накидываем на эмиттер тег симуляции, копируем для дочерних объектов, удаляем далее для эмиттера и настраиваем сразу у всех показатели трения и отскока
![](_png/Pasted%20image%2020221026201900.png)
- Накидываем на плэйн тэг соударения
![](_png/Pasted%20image%2020221026201852.png)
- Так же можно повращать примитивы внутри эмиттера, чтобы они сразу вылетали под углом
![](_png/Pasted%20image%2020221026201848.png)
- В коллизии объекта соударения, чтобы считались внутренние полости, нужно поставить статичную сетку
![](_png/Pasted%20image%2020221026201844.png)
![](_png/Pasted%20image%2020221026201841.png)
- Здесь тоже нужно ставить восприятие внутренних полостей
![](_png/Pasted%20image%2020221026201838.png)
- В настройках проекта можно запечь анимацию динамики, чтобы вьюпорт нормально шёл
![](_png/Pasted%20image%2020221026201835.png)
![](_png/Pasted%20image%2020221026201832.png)
- Ну и чтобы применить изменения для динамики, нужно очистить кэш и уже потом можно будет его перепечь
![](_png/Pasted%20image%2020221026201828.png)

#### **Урок 3. Конвейерная лента**

- Первым делом, нам нужен сплайн, с помощью которого мы зададим путь нашему клонеру, чтобы он заанимировал движение ленты
![](_png/Pasted%20image%2020221026200427.png)
- Этот путь можно использовать так же для создания боковых пал
![](_png/Pasted%20image%2020221026200423.png)
- И вот наша лента в браузере. Отличить ленту можно по цвету материала на клонере
![](_png/Pasted%20image%2020221026200420.png)
- Сейчас мы заанимируем барабаны, которые крутят ленту (не саму ленту) с помощью тайма
![](_png/Pasted%20image%2020221026200416.png)
![](_png/Pasted%20image%2020221026200413.png)
- Тут мы анимируем вращение у наших барабанов, которые крутят ленту
![](_png/Pasted%20image%2020221026200409.png)
- Тут клоны будут автоматически сдвигаться вдоль сплайна с помощью данного параметра
![](_png/Pasted%20image%2020221026200404.png)
- Так же тут можно добавить вариацию в анимацию, но её добавлять не стоит, так как это будет ломать структуру в данном случае
![](_png/Pasted%20image%2020221026200400.png)
- Тут мы накинем эффектор на вторую ленту и движение будет на -90 градусов. В клонере рейт ставим на -8
![](_png/Pasted%20image%2020221026200357.png)
![](_png/Pasted%20image%2020221026200350.png)
- Далее мы выбираем нашу коробку и делаем из неё риджит бади и выставляем настройку, чтобы она считалась как единый объект
![](_png/Pasted%20image%2020221026200345.png)
![](_png/Pasted%20image%2020221026200342.png)
- Дальше выбираем в качестве коллайдер бади нашу ленту и выбираем в его параметре All, чтобы от клонера считалось, что это один цельный объект
![](_png/Pasted%20image%2020221026200338.png)
![](_png/Pasted%20image%2020221026200335.png)
- И так же накидываем коллайдер на кресло, так как и на него иногда падают объекты
![](_png/Pasted%20image%2020221026200331.png)
- Так же синема изначально ограничивает объекты большими границами, из-за чего коробка выпадает с кресла. Чтобы избежать проблемы невидимых стен, нужно выбрать статик меш
![](_png/Pasted%20image%2020221026200328.png)
![](_png/Pasted%20image%2020221026200325.png)
- Выбираем сразу все теги анимации и меняем их трение с прыгучестью
![](_png/Pasted%20image%2020221026200320.png)
- Далее нам нужно создать эмиттер, который будет выпускать наши частицы
![](_png/Pasted%20image%2020221026200317.png)
- Настраиваем ему размер
![](_png/Pasted%20image%2020221026200315.png)
- Настраиваем количество выпадающих объектов, время остановки генерации, время жизни частиц, испускаемых им и убираем скорость данным частицам, чтобы они падали под действием гравитации
![](_png/Pasted%20image%2020221026200311.png)
- Закидываем в эмиттер коробки и ставим галку отображения объектов
![](_png/Pasted%20image%2020221026200307.png)
- Ставим коллижн бади для стен и пола и задаём отскакиваемость и трение
![](_png/Pasted%20image%2020221026200301.png)
![](_png/Pasted%20image%2020221026200257.png)
- Так же создаём куб сбоку от конвеера. Он будет невидимым телом, которое не даст упрыгивать остальным объектам за конвеер.
![](_png/Pasted%20image%2020221026200253.png)
![](_png/Pasted%20image%2020221026200249.png)
- Чтобы исправить нашу проблему с тем, что коробки падают друг на друга, можно немного подопустить эмиттер и уменьшить область его выпускания частиц
![](_png/Pasted%20image%2020221026200246.png)
- Так же можно уменьшить прыгучесть и увеличить трение у коробок, чтобы они не слетали с конвеера
![](_png/Pasted%20image%2020221026200242.png)
- Вот настройки рендера из видео
![](_png/Pasted%20image%2020221026200239.png)
- Далее нажимаем на Ctrl+D и попадаем в настройки проекта. Во вкладке динамики можно поставить глобальное замедление динамики (Time Scale). Так же можно включить или отключить гравитацию (либо скорректировать её)
![](_png/Pasted%20image%2020221026200235.png)
![](_png/Pasted%20image%2020221026200229.png)
- Тут, во вкладке Expert, нам нужно поднять показали подразделение кадров динамики, чтобы её качество было выше и не вылезло никаких артефактов
![](_png/Pasted%20image%2020221026200226.png)
- Ну и последнее, что нам нужно сделать – это закешировать нашу динамику, чтобы сохранить её
![](_png/Pasted%20image%2020221026200223.png)
#### Урок 4. Параметр Force. Композ
![](_png/Pasted%20image%2020221026200207.png)
- Настройки рендера
![](_png/Pasted%20image%2020221026200203.png)
![](_png/Pasted%20image%2020221026200158.png)
- Создаём куб, по которому у нас будут распределены шарики. Всё окружение находится в нуле
![](_png/Pasted%20image%2020221026200155.png)
- Меняем заполнение на Volume
![](_png/Pasted%20image%2020221026200152.png)
- Видимость куба отключаем
![](_png/Pasted%20image%2020221026200150.png)
- Количество шариков увеличиваем через клонер
![](_png/Pasted%20image%2020221026200146.png)
- И далее накидываем на клонер риджт бади, чтобы все объекты в нём стали двигаемые
![](_png/Pasted%20image%2020221026200143.png)
![](_png/Pasted%20image%2020221026200140.png)
![](_png/Pasted%20image%2020221026200138.png)
- И чтобы шарики держались друг с другом, можно накинуть на куб коллайдер бади, выбрать статик меш, чтобы шаарики не разлетались и тогда получится невидимая коробка с двигающимися шариками, _но это не круто_. Можно сделать по-другому
![](_png/Pasted%20image%2020221026200133.png)
- И уже идёт смачная вкладка Force. Она заставляет объекты возвращаться в их исходное положение, но их анимация всё так же будет оставаться
![](_png/Pasted%20image%2020221026200122.png)
- Если мы создадим шар, на который накинем коллижн бади и будем, нажав на плей внизу, двигать его, то шарики будут двигаться как желе и возвращаться на свою стартовую позицию
![](_png/Pasted%20image%2020221026200119.png)
- Вот изображение на выходе из синемы
![](_png/Pasted%20image%2020221026200115.png)
- Первым делом получаем дымку через блюр и наложение со скрином того же изображения
![](_png/Pasted%20image%2020221026200111.png)
![](_png/Pasted%20image%2020221026200108.png)
- Цветокор теней
![](_png/Pasted%20image%2020221026200103.png)
- Наложение бликов
![](_png/Pasted%20image%2020221026200059.png)
- FL Depth Of Field - позволяет создавать глубину резкости – сторонний плагин
![](_png/Pasted%20image%2020221026200056.png)
- Далее идут шурешки (блики, пыль и так далее)
![](_png/Pasted%20image%2020221026200052.png)
![](_png/Pasted%20image%2020221026200043.png)
- Оптикал флеирс
![](_png/Pasted%20image%2020221026200039.png)
- Свет, детали
![](_png/Pasted%20image%2020221026200037.png)
- Далее с помощью Gradient Ramp создаётся виньетка по краям
![](_png/Pasted%20image%2020221026200034.png)
- В шейп леерах находится подсвечивание отдельных частей
![](_png/Pasted%20image%2020221026200030.png)
- И тут мы меняем разными масками на одном слое оттенки изображения с помощью hue
![](_png/Pasted%20image%2020221026200005.png)

#### **Урок 5.**

-

-

#### **Урок 6.**

-

-

#### **Урок 7.**

-

-

#### **Урок 8.**

-

-

#### **Урок 9.**

-

-

#### **Урок 10.**

-
-


- Для изменения качества и вида самого рендера можно менять следующие параметры:

1. Во вкладке General можно изменить гравитацию и изменяя TS менять скорость воспроизведения
![](_png/Pasted%20image%2020221026195921.png)
2. Во вкладке Expert если повысить эти значения, то качество анимации вырастет
![](_png/Pasted%20image%2020221026195918.png)
3. Можно закэшировать анимацию для её просчёта заранее (если вносить изменения в анимацию, то кэш придётся очищать)
![](_png/Pasted%20image%2020221026195914.png)
Тэги (Simulation tags):

-

-- Основные настройки – Collision (последние три настройки)

-

- Чтобы тэг применился к Cloner, нужно поменять individual elements на all 

- Чтобы тэг применился к Null, нужно поменять inherit tag на apply to tag children (второй вариант в списке применяет эффект ко всем объектам как к одному (состоящий из многих мелких))

- Если применить в Shape – static mesh, то тег будет учитывать внутреннее изменение пространства параметрического объекта

- Во вкладке Force во второй группе настроек можно поменять силу взаимодействия между объектами (количество отдаваемой энергии)

- Чтобы проигрывание анимации начиналось с понравившегося состояния, нужно тыкнуть на эту кнопку и чтобы откатиться, нужно нажать на кнопку справа
![](_png/Pasted%20image%2020221026195907.png)
- Данные два параметра не дают разлететься объектам и создают притяжение между ними (можно среди этих объектов во время проигрывания в реальном времени поводить объектом с collider и получится, что они как магнитики будут разлетаться и слипаться)
![](_png/Pasted%20image%2020221026195903.png)
- Если нам нужно куда-нибудь запустить предмет, чтобы он летел туда, куда глаза глядят, то с помощью данных параметров можно поменять начальную траекторию скорости, куда он движется
![](_png/Pasted%20image%2020221026195859.png)
- Чтобы неровный объект не распадался и сохранял свою позицию до того, как его не разрушат, нужно поменять параметр с _Immediately_ на _on_ _collusion_
![](_png/Pasted%20image%2020221026195857.png)
-                     Чтобы не ломать всю стену, нужно сделать выборку в MoGraph Selection и эту выборку закинуть
![](_png/Pasted%20image%2020221026195854.png)
-                     Так же можно изменить силу применения, изменив плотность в разделе mass и поменяв на custom density
![](_png/Pasted%20image%2020221026195842.png)
-                     Так же можно менять объекты при изменении их скорости (если взять plain и поменяв его на сферу водить по время воспроизведения по данному объекту, чтобы он рушился). Очень хорошо работает как с клонером, так и с voronoy fracture
![](_png/Pasted%20image%2020221026195838.png)
-                     В вороном можно сделать коннектор, который будет связывать объекты и в зависимости от указанных значений будет разбивать по-своему данный объект (не полностью все части разбивать при разрешении, а только физически-определённые)
![](_png/Pasted%20image%2020221026195832.png)
-                     **_Тэг_** **_Soft_** **_делает из объекта почти желе_**

-                     При изменении данного параметра связь по линии полигона становится слабже
![](_png/Pasted%20image%2020221026195805.png)
- При изменении этого связь по диагонали ослабевает
![](_png/Pasted%20image%2020221026195800.png)
- Изменение параметра Flexion меняет силу сохранения угла у объекта

- Damping меняет прыгучесть объектов

- Stiffness меняет уровень деформации

- Pressure надувает объекты (добавляет выпуклости)

**Симуляция ткани**

- Тэги Cloth и Cloth Collider

- Первым делом нужно сделать плэйн и перевести его в полигональный объект, выделить точки (если будем использовать tear, то выделить точки неровно) и подтвердить выделение в Cloth тэге

- Чтобы переместить флаг, все точки нужно будет снять и на время переместить тэг cloth на другой объект
![](_png/Pasted%20image%2020221026195748.png)
- Дальше на объект соударения накинуть Cloth Collider

- Во вкладке tag поменять Bounce, Friction, Iterations (глобальная жёсткость) и Robber (тягучесть)

- Во вкладке Expert меняем параметры на эти
![](_png/Pasted%20image%2020221026195742.png)
- Так же докидываем данный тэг
![](_png/Pasted%20image%2020221026195739.png)
- Чтобы флаг развивался и имел физику нужно ввести скорость свободного падения (gravite), определить скорость (повышая drag, повышается замедление), определить сторону, откуда дует ветер (wind), вписать силу ветра (w strenght)
![](_png/Pasted%20image%2020221026195735.png)
-                     Разрыв флага можно включить с помощью use tear (а порог разрыва увеличить с помощью tear). Изменение параметра Rubber хорошо дополняет данную симуляцию
![](_png/Pasted%20image%2020221026195732.png)
- **Character** **tags** **-** **Point** **Cache** **–** тэг, который фиксирует точки и позволяет изменять скорость воспроизведения анимации и время её начала.
![](_png/Pasted%20image%2020221026195728.png)
-                     Чтобы сделать симуляцию шторы, нужно воспользоваться новым объектом **_Cloth_** **_Belt_**

-                     Создаём обычную сцену с Cloth (на plane) и Cloth Collider (на шар и пол), рядом создаём циллиндр, переводим в полигоны, нажимаем Ctrl+A (выделяем на нём все точки) и нажимаем optimize.
![](_png/Pasted%20image%2020221026195724.png)
- Далее кидаем на полотно Cloth Belt, в belt on кладём наш цилиндр, на полотне выделяем точки и нажимаем кнопку Set. Чтобы поправить недочёты меняем нижние два параметра.
![](_png/Pasted%20image%2020221026195701.png)


#### Итоговая анимация динамики

- Первым делом связываем через constraint по PSR наш Atom Array, который сделан на основе инстанса оригинального платоника, который был выдавлен через полигональное моделирование.
![](_png/Pasted%20image%2020221026195650.png)
![](_png/Pasted%20image%2020221026195653.png)
- Через Viberate анимируем сам наш полигональный платоник и Atom Array, который над ним
![](_png/Pasted%20image%2020221026195647.png)
- Сферы мы через клонер распределили по диску а с помощью эффектов симуляции сделали трогаемые стены и шарики в следствие чего они распределились по комнате. Далее мы тыкнули по set initial state, чтобы сцена начиналась с данного положения шариков
![](_png/Pasted%20image%2020221026195644.png)
- Просто так прилипнуть шарикам к платонику не получится, так как они просто будут повторять его viberate, поэтому с помощью матрицы создаём координаты углов
![](_png/Pasted%20image%2020221026195640.png)
- Далее меняем в матрице distribution на surface и связываем параметры распределения координат и шарики (их количество). Сначала выбираем как драйвер наши шарики, а потом количество точек
![](_png/Pasted%20image%2020221026195630.png)
![](_png/Pasted%20image%2020221026195633.png)
- Чтобы тэг динамики не доминировал и дал менять позицию шариков, нужно поменять следующие параметры
![](_png/Pasted%20image%2020221026195626.png)
- Чтобы заанимировать прилипание шариков к платонику, нужно закинуть сам эффектор в матрицу (и на всякий в клонер),
![](_png/Pasted%20image%2020221026195621.png)
- Выставляем линейное появление и анимируем проезжание эффектора
![](_png/Pasted%20image%2020221026195617.png)
- Далее выставляем тэг соударения на наш платоник и его Array

- Пихаем рандом в наследие, чтобы не анимировать 2 раза. В рандоме во вкладке эффектор рандом мод меняем на нойз и меняем силу на 20% (первый параметр последнего блока), ну и также выставляем линейное появление
![](_png/Pasted%20image%2020221026195608.png)
- Далее выбираем своеобразную чёрную дыру (**_Attractor_**) для шариков и располагаем над платоником чуть повыше в трубе
![](_png/Pasted%20image%2020221026195558.png)
- Далее уже анимируем силу аттрактора параллельно уменьшая follow (для того, чтобы шарики не лепились к данному платонику)
![](_png/Pasted%20image%2020221026195549.png)
![](_png/Pasted%20image%2020221026195553.png)
- Остаётся только нажать Ctrl+D, запечь анимацию и поставить на рендер

**_Симуляции (_****_Simulate_****_)(все основные настройки в_** **_object_****_):_**

-                     Wind – создаёт источник ветра

-                     Turbulence – создаёт невидимую неоднородность и турбуленцию объектов

-                     Emitter - выплёвывает из себя объекты

-                     Attractor – чёрная дыра для партиклов, которая их сжирает (противоположность эмиттеру)