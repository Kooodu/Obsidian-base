>[!info] Что такое иммутабельность?  Иммутабельность - это свойство объекта, при котором его нельзя изменить - как он был создан, таким и остаётся.
> - Такой подход сохраняется и в React, потому как обычно все наши объекты неизменны. Чтобы поменять отображение объекта на странице, нужно создать его копию и изменить уже её.
> - Такой подход очень сильно облегчает работу программиста и он обеспечивает работу reconciliation-алгоритма  
> - Однако немного падает производительность за счёт того, что нужно сохранять прошлое состояние объекта


Нам нужно реализовать метод для удаления сотрудников из списка сотрудников. Чтобы удалять сотрудников, нам нужно удалять их физически: из данных (например, в БД).

В первую очередь нам нужно создать сам метод для удаления:
```JSX
function App() {  
   const data = [  
      { name: 'Johnathan', salary: 800, increase: false, id: 1 },  
      { name: "Cloose", salary: 1800, increase: true, id: 2 },  
      { name: "Angela", salary: 300, increase: false, id: 3 },  
   ];  
  
   return (  
      <div className="app">  
         <AppInfo />  
  
         <div className="search-panel">  
            <SearchPanel />  
            <AppFilter />  
         </div>  
  
         <EmployeesList  
            data={data}  
            // Сам метод удаления будет представлять из себя функцию, которая будет возвращать нам id пользователя в консоль (определяем элемент для удаления)
            onDelete={id => console.log(id)}  
         />  
         <EmployeesAddForm />  
      </div>  
   );  
}
```
В самого работника нам нужно поместить срабатывание метода onDeleted, который будет вызывать его при клике
```JSX
render() {  
	// Добавляем сюда метод onDeleted
    const {name, salary, onDeleted} = this.props;  
    const {increase, liked} = this.state;  
  
    let classNames = `list-group-item d-flex justify-content-between`;  
  
    if (increase) {  
        classNames += ' increase';  
    }  
    if (liked) {  
        classNames += ' like';  
    }  
    return (  
        <li className={classNames}>  
        <span  
            className="list-group-item-label"  
            onClick={this.setLike}>  
            {name}  
        </span>  
            <input type="text" className="list-group-item-input" defaultValue={`${salary}$`}/>  
            <div className="d-flex justify-content-center align-items-center">  
                <button type="button"  
                        className="btn-cookie btn-sm"  
                        onClick={this.onIncrease}>  
                    <i className="fas fa-cookie"></i>  
                </button>  
  
                <button type="button"  
                        className="btn-trash btn-sm"  
                        // И вызваем onDeleted при клике на этот значок
                        onClick={onDeleted}  
                >                    
                <i className="fas fa-trash"></i>  
                </button>  
                <i className="fas fa-star"></i>  
            </div>  
        </li>  
    );  
}
```
И в самом списке работников мы завершаем функционал идентификации определённого элемента списка
```JSX
const EmployeesList = ({data, onDelete}) => {  
    const elements = data.map((item) => {  
        const {id, ...itemProps} = item;  
        return (  
            <EmployeesListItem  
                key={id} {...itemProps}  
                // Сюда в Delete мы уже спокойно передаём id нашего элемента, чтобы обращаться к нему
                onDeleted={() => onDelete(id)}  
            />  
        );  
    });  
  
    return (  
        <ul className="app-list list-group">  
            {elements}  
        </ul>  
    );  
}
```
И теперь при клике на корзинку, мы можем увидеть индекс работника в списке
![](_png/Pasted%20image%2020221021122738.png)

Дальше нам нужно реализовать непосредственно работу с данными. Самый правильный способ работы с данными - это менять их через стейт. 

```JSX
class App extends Component {  
   constructor(props) {  
      super(props);  
      this.state = {  
         data: [  
            {name: 'Johnathan', salary: 800, increase: false, id: 1},  
            {name: "Cloose", salary: 1800, increase: true, id: 2},  
            {name: "Angela", salary: 300, increase: false, id: 3},  
         ],  
      }   };  
  
   deleteItem = (id) => {  
      this.setState(({data}) => {  
         const index = data.findIndex((elem) => {  
            return elem.id === id;  
         });  
  
         console.log(index);  
  
         return index;  
      });  
   }  
  
   render() {  
      return (  
         <div className="app">  
            <AppInfo />  
  
            <div className="search-panel">  
               <SearchPanel />  
               <AppFilter />  
            </div>  
  
            <EmployeesList  
               data={this.state.data}  
               onDelete={this.deleteItem}  
            />  
            <EmployeesAddForm />  
         </div>  
      );  
   }  
}
```

![](_png/Pasted%20image%2020221021130907.png)

Далее нам нужно реализовать само удаление элемента со страницы. Сразу нужно повториться: ==менять напрямую стейт нельзя==

Это пример неправильной реализации, так как тут меняется стейт напрямую
```JSX
deleteItem = (id) => {  
   this.setState(({data}) => {  
      const index = data.findIndex(elem => elem.id === id);  

	  // Напрямую изменять стейт вот так - нельзя!
      data.splice(index, 1);  
  
      return {  
         data: data
      };  
   });  
}
```














>[!note] Для чуть большего ознакомления с иммутабельными объектами, стоит ознакомиться с [этой статьёй](https://habr.com/ru/company/developersoft/blog/302118/)